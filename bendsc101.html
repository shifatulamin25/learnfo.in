<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Responsive PDF Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    h2 {
      background: #070710;
      color: white;
      padding: 1rem;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .sub {
      font-style: oblique;
      font-size: medium;
    }

    .instruction {
      font-size: 1.1rem;
      margin: 10px 0;
      color: #333;
    }

    .button-container {
      margin: 20px 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .button-container button {
      padding: 10px 20px;
      font-size: 1rem;
      background: #4f46e5;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .button-container button:hover {
      background-color: #4338ca;
    }

    .viewer-container {
      width: 100%;
      height: 80vh;
      padding: 10px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f8f9fa;
      border: 1px dashed #ccc;
      border-radius: 8px;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: none; /* Hidden by default */
    }

    .footer {
      background-color: #e2e8f0;
      padding: 15px;
      text-align: center;
      font-size: 0.9rem;
      color: #444;
      border-top: 1px solid #ccc;
      margin-top: 20px;
    }

    .loading {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.9);
      display: none; /* Hidden by default */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(243, 243, 243, 0.3);
      border-top: 4px solid #4f46e5;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      margin-bottom: 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      color: #4f46e5;
      font-weight: bold;
    }

    .initial-message {
      font-size: 1.2rem;
      color: #666;
      text-align: center;
      padding: 20px;
    }

    /* Hide Google's toolbar */
    .pdf-frame-container {
      position: relative;
      overflow: hidden;
      height: 100%;
      width: 100%;
    }
    .pdf-frame-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 45px;
      background: white;
      z-index: 1;
    }
  </style>
</head>
<body>
  <h2><img src="PHOTOS/main.logo.png" alt="" width="30">Learnfo</h2>
  <p class="sub">BENGALI DSC 101 SEMESTER 1</p>
  <p class="instruction">ðŸ“„ Please select unit:</p>

  <div class="button-container">
    <button onclick="loadPDF('FYUG answer and solutions/bengali sem 1/DSC 101/bengali sem1 unit1 dsc.pdf')">UNIT 1</button>
    <button onclick="loadPDF('FYUG answer and solutions/bengali sem 1/DSC 101/bengali dsc 101 unit 2.pdf')">UNIT 2</button>
    <button onclick="loadPDF('FYUG answer and solutions/bengali sem 1/DSC 101/bengali dsc 101 unit3.pdf')">UNIT 3</button>
    <!--<button onclick="loadPDF('.pdf')">UNIT 4</button>-->
    <button onclick="loadPDF('FYUG answer and solutions/bengali sem 1/DSC 101/BENGALI DSC 101 UNIT 5.pdf')">UNIT 5</button>
  </div>

  <div class="viewer-container">
    <div id="initialMessage" class="initial-message">
      Please select a unit to view the PDF
    </div>
    <div id="loading" class="loading">
      <div class="spinner"></div>
      <div class="loading-text">Loading PDF...</div>
    </div>
    <div class="pdf-frame-container">
      <iframe id="pdfFrame" src="" frameborder="0"></iframe>
    </div>
  </div>

  <footer class="footer">
    <p>Disclaimer: All PDF materials are used for educational purposes only. If any copyrighted material is used, full credit is given to the original owners. If you are the rightful owner and want it removed, please contact us at lernfo25@gmail.com</p>
  </footer>

  <script>
    // Cache for loaded PDFs
    const pdfCache = {};
    let currentPdf = null;

    function loadPDF(pdfPath) {
      if (currentPdf === pdfPath) return;
      currentPdf = pdfPath;

      // Hide initial message and show loading
      document.getElementById('initialMessage').style.display = 'none';
      document.getElementById('loading').style.display = 'flex';
      document.getElementById('pdfFrame').style.display = 'none';
      
      // Check cache first
      if (pdfCache[pdfPath]) {
        showPDF(pdfCache[pdfPath]);
        return;
      }

      // Construct viewer URL with cache-busting parameter
      const timestamp = new Date().getTime();
      const viewerURL = `https://docs.google.com/gview?url=${encodeURIComponent(location.origin + '/' + pdfPath)}&embedded=true&random=${timestamp}`;
      
      // Store in cache
      pdfCache[pdfPath] = viewerURL;

      // Load the PDF
      showPDF(viewerURL);
    }

    function showPDF(url) {
      const pdfFrame = document.getElementById('pdfFrame');
      const loading = document.getElementById('loading');
      
      // Reset the iframe first
      pdfFrame.src = '';
      
      // Use setTimeout to ensure the reset takes effect
      setTimeout(() => {
        pdfFrame.src = url;
        
        // When PDF is loaded
        pdfFrame.onload = function() {
          loading.style.display = 'none';
          pdfFrame.style.display = 'block';
          
          // Additional measures to prevent pop-out
          try {
            const iframeDoc = this.contentDocument || this.contentWindow.document;
            iframeDoc.addEventListener('contextmenu', (e) => {
              e.preventDefault();
              return false;
            });
            
            // Hide Google's toolbar if it exists
            const toolbar = iframeDoc.getElementById('toolbar');
            if (toolbar) toolbar.style.display = 'none';
          } catch (e) {
            console.log("Security restriction prevented toolbar hiding");
          }
        };
      }, 50);
    }

    // Prevent right-click on the page
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      return false;
    });

    // Prevent keyboard shortcuts that might open new windows
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey || e.metaKey) {
        e.preventDefault();
        return false;
      }
    });
  </script>
</body>
</html>
